"use strict";function asyncGeneratorStep(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){asyncGeneratorStep(o,r,a,i,c,"next",t)}function c(t){asyncGeneratorStep(o,r,a,i,c,"throw",t)}i(void 0)}))}}var moduleRouter=function(){function t(t){return e.apply(this,arguments)}function e(){return(e=_asyncToGenerator(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=document.getElementsByTagName("script")[document.getElementsByTagName("script").length-1]).parentNode.removeChild(n),(r=document.createElement("script")).type="text/javascript",r.defer=!0,r.async=!1,r.src=e+"/index.js",t.prev=7,t.next=10,fetch(r.src,{method:"GET"});case 10:404!==t.sent.status||(r.src=""),document.body.append(r),t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(7),t.abrupt("return",void 0);case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))).apply(this,arguments)}function n(){wrapTemplate.innerHTML="loading...";var e="/pages/404",n="Page not found",r=location.origin+"#page=404";fetch(e,{method:"GET"}).then((function(t){return t.text()})).then((function(a){return window.history.replaceState({template:e,page:n,url:r},n,r),document.title=n,wrapTemplate.innerHTML=a,t(e)})).catch((function(t){}))}function r(e,r,a){wrapTemplate.innerHTML="loading...",fetch(e,{method:"GET"}).then((function(t){if(404!==t.status)return t.text();throw new Error("No template for this page - 404")})).then((function(n){return window.history.pushState({template:e,page:r,url:a},r,a),document.title=r,wrapTemplate.innerHTML=n,t(e)})).catch((function(t){n()}))}function a(){location.href!==location.origin+location.pathname&&history?history.state?function(){wrapTemplate.innerHTML="loading...";var e=history.state.template,n=history.state.page,r=history.state.url;fetch(e,{method:"GET"}).then((function(t){return t.text()})).then((function(a){return history.replaceState({template:e,page:n,url:r},n,r),document.title=n,wrapTemplate.innerHTML=a,t(e)})).catch((function(t){}))}():history.back():r(pages[0].templatePath,pages[0].name,pages[0].href)}return{linksListener:function(t){!function(t){Array.from(document.getElementsByClassName(t)).forEach((function(t){t.addEventListener("click",(function(e){null!==history.state&&null!==history.state.template&&void 0!==this.dataset&&this.dataset.template===history.state.template||(r(this.dataset.template,t.text,this.href),e.stopPropagation(),e.preventDefault())}),!1)}))}(t)},hashListener:function(t){!function(t){Array.from(document.getElementsByClassName(t)).forEach((function(t){t.addEventListener("click",(function(e){var n=document.getElementById(t.dataset.hash).getBoundingClientRect().top-100;window.scrollBy({top:n,behavior:"smooth"}),e.stopPropagation(),e.preventDefault()}),!1)}))}(t)},callTemplate:function(){a()},navStateOrHashChange:function(){wrapTemplate.innerHTML="loading...",fetch(location.href.replace("#page=","pages/"),{method:"GET"}).then((function(t){if(404!==t.status)return t.text();throw new Error("No template for this page - 404")})).then((function(e){return wrapTemplate.innerHTML=e,t(location.hash.replace("#page=","/pages/"))})).catch((function(t){n()}))},getErrorPageTemplate:function(){n()}}}();